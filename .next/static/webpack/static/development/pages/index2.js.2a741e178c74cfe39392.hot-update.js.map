{"version":3,"file":"static/webpack/static\\development\\pages\\index2.js.2a741e178c74cfe39392.hot-update.js","sources":["webpack:///./pages/index2.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport factory from '../factory';\r\nimport { Card, Button, Form, Label, Input, Dropdown , Message} from 'semantic-ui-react';\r\nimport Layout from '../components/Layout';\r\nimport { Link, Router } from '../routes';\r\nimport web3 from '../web3';\r\nimport Campaign from '../campaign';\r\nimport Info from '../components/Grid';\r\nimport Wrap from '../components/Wrap';\r\nimport Modal from '../components/Modal2';\r\nimport PaypalButton from '../components/PaypalButton';\r\nimport axios from 'axios';\r\nimport Notify from '../components/Message2';\r\n\r\n\r\n\r\n\r\n\r\nclass CampaignIndex extends Component {\r\nstate = {\r\n  isOpen: false,\r\n  donation: '',\r\n  error: '',\r\n  visible: false,\r\n  payment: {}\r\n  \r\n}\r\n\r\ntoggle = () =>\r\n{ console.log(\"in callback\")\r\nthis.setState(prevState => ({\r\n  isOpen: !prevState.isOpen\r\n}));\r\n}\r\nhandleDismiss = () => {\r\n  this.setState({ visible: false })\r\n }\r\n\r\n\r\n\r\n\r\n  static async getInitialProps(props) {\r\n    try {\r\n      const campaigns = await factory.methods.getDeployedCampaigns().call();\r\n      const accountInfo = props.query;\r\n      const accounts = await web3.eth.getAccounts();\r\n      \r\n      const summaries = await campaigns.map(async (address, index)=>\r\n      {\r\n        let campaign = await Campaign(address);\r\n        \r\n        let summary =  await campaign.methods.getSummary().call();\r\n        return summary\r\n      })\r\n\r\n   \r\n    return { campaigns, accountInfo, accounts , summaries};\r\n  }\r\n\r\n  catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n  \r\n  componentWillReceiveProps = (props) =>\r\n  {\r\nconsole.log(\"in component will recieve props\");\r\nconsole.log(props)\r\n  }\r\n\r\n  \r\n  renderInfo = () => {\r\n    let latest = this.props.campaigns.length;\r\n    \r\n   \r\n    \r\n  \r\n\r\n\r\n    const items = this.props.campaigns.map((address, index) => {\r\n     \r\n\r\n      return {\r\n        header: \" Campaign:   #\" + (index +1),\r\n        color: (index + 1 == latest) ? \"green\" : \"null\",\r\n        description: (\r\n          <Wrap>\r\n            <br />\r\n          <Info address= {address} accountInfo = {this.props.accountInfo.accountInfo}/>\r\n          <div>\r\n            <br />\r\n        <Link route={`/campaigns/${this.props.accountInfo.accountInfo}/${address}`}>\r\n            <a style={{fontSize: \"20px\" , padding: \"5px\"}}> view details </a>\r\n          </Link>\r\n          </div>\r\n          <br />\r\n          <div style ={{marginTop: \"20px\"}}>\r\n          <Modal address = {address} accountInfo ={this.props.accountInfo.accountInfo} callback= {this.toggle} /> \r\n          \r\n          </div>\r\n         \r\n   \r\n          </Wrap>\r\n        ),\r\n        fluid: true,\r\n      };\r\n    }).reverse();\r\n\r\n\r\n\r\n    return <Card.Group items={items} style={{marginLeft: '80px' ,marginRight: '80px'}}  />\r\n  }\r\n\r\n\r\n  render() {\r\n    \r\n\r\n\r\n    return (\r\n      <Layout>\r\n       \r\n        <div style={{ color: 'red' }}>\r\n          <h1 style={{ padding: '10px', color: 'black' , fontFamily: 'Ariel'}}>Open Campaigns</h1>\r\n          {this.renderInfo()}\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CampaignIndex;\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAQA;AACA;AACA;AAAA;AAAA;AACA;AADA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AA2BA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAMA;AAGA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAOA;AAtBA;AAwBA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;AAEA;AAIA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;;;AAtFA;;;;;;;;AAEA;AACA;;AADA;AACA;;AACA;AACA;;AADA;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AAFA;AAAA;AACA;AADA;AAIA;AAJA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;;AADA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;AAGA;AACA;;;;;;;;;;;;;;;;;;AA3CA;AACA;AA+GA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}